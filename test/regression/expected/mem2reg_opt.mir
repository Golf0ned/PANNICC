define i32 @fun_call() {
entry:
  br label 0

0:
  ret i32 0
}

define i32 @mem2reg_basic() {
entry:
  %0 = add i32 1, i32 2
  %1 = sub i32 3, i32 1
  %2 = mul i32 %0, i32 %1
  %3 = and i32 %0, i32 1
  %4 = call i32 @fun_call
  br label 5

5:
  ret i32 %3
}

define i32 @mem2reg_branching() {
entry:
  br i32 0, label 0, label 5

0:
  br i32 1, label 1, label 2

1:
  br label 3

2:
  br label 3

3:
  %4 = phi i32 [ 2, %1 ], [ 3, %2 ]
  br label 6

5:
  br label 6

6:
  %7 = phi i32 [ 4, %3 ], [ 5, %5 ]
  br label 8

8:
  ret i32 6
}

define i32 @mem2reg_while() {
entry:
  br label 0

0:
  %1 = phi i32 [ %5, %4 ], [ 123, %18446744073709551615 ]
  %2 = phi i32 [ %6, %4 ], [ 456, %18446744073709551615 ]
  %3 = phi i32 [ 432, %4 ]
  br i32 %2, label 4, label 7

4:
  %5 = add i32 %1, i32 432
  %6 = sub i32 %2, i32 2
  br label 0

7:
  br i32 %2, label 8, label 9

8:
  br label 10

9:
  br label 10

10:
  %11 = phi i32 [ %2, %8 ], [ 987654321, %9 ]
  ret i32 %11
}

define i32 @mem2reg_negative() {
entry:
  %0 = add i32 6, i32 7
  br label 1

1:
  ret i32 %0
}
